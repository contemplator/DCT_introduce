<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

        <!--jquery-->
        <script src="js/jquery-1.9.1.js"></script>
        <script src="js/jquery-ui.js"></script>
        <link href="css/jquery-ui.css" rel="stylesheet">

        <!--bootstrap-->
        <!-- <link href="bootstrap/css/bootstrap-responsive.css" rel="stylesheet"> -->
        <link href="bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet">
        <!-- <link href="bootstrap/css/bootstrap.css" rel="stylesheet"> -->
        <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">
        <script src="bootstrap/js/bootstrap.js"></script>
        <script src="bootstrap/js/bootstrap.min.js"></script>

        <!--other-->
        <!-- <link href="css/animate-custom.css" rel="stylesheet"> -->
        <link rel="stylesheet" type="text/css" media="all" href="960_min/reset.css" />
        <link rel="stylesheet" type="text/css" media="all" href="960_min/text.css" />
        <link rel="stylesheet" type="text/css" media="all" href="960_min/960.css" />
        <link href="css/nav_css.css" rel="stylesheet">

        <style>
            body{
                font-family: '微軟正黑體';
                background-image: url(image/bkground.png);
            }

            .head{
                border-top: solid;
                border-bottom: solid;
                margin-top: 10px;
                margin-bottom: 10px;
                background-color:#FFF;
            }
            /*clock*/
            #clockContainer {
                width: 120px;
                height: 120px;
                position:relative;
                top: 5px;
                left: 0px;    
            }

            #clock {
                position: absolute;
                width: 120px;
                height: 120px;
                margin: 0px;
                background: url(image/clock.jpg) 0 0 no-repeat;
                list-style: none;
            }

            #sec, #min, #hour {
                position: absolute;
                width: 120px;
                height: 120px;
                top: 0px;
                left: 0px;
            }

            #sec {
                background: url(image/clock_seconds.png);
                z-index: 3;
            }

            #min {
                background: url(image/clock_minutes.png);
                z-index: 2;
            }

            #hour {
                background: url(image/clock_hours.png);
                z-index: 1;
            }

            li{
                display: list-item;
                text-align: -webkit-match-parent;
                margin-left: 0px;
            }
            /*clock end*/

            #footer{
                background-color: #e0d9cb;
                font-size: 14px;
            }
        </style>
    </head>
    <body>
        <div class="container_12">
            <div id="header">
                <div class="grid_12 head">
                    <div class="grid_10"><a href="index.html"><img src="image/header.jpg" alt="" /></a></div>
                    <div id="clockContainer" class="grid_3">
                        <ul id="clock">
                            <li id="sec"></li>
                            <li id="hour"></li>
                            <li id="min"></li>
                        </ul>
                    </div>
                </div>

                <div id="nav-bar" class="grid_12">
                    <nav class="main-nav" id="main-nav">
                        <a href="index.html" class="home link">
                            <span class="icon-home" aria-hidden="true"></span>首頁
                        </a>
                        <a href="introduce.html" class="forums link">
                            <span class="icon-star" aria-hidden="true"></span>認識學程
                        </a>
                        <a href="member_teacher.html" class="snippets link">
                            <span class="icon-user" aria-hidden="true"></span>成員
                        </a>
                        <a href="course.html" class="gallery link">
                            <span class="icon-book" aria-hidden="true"></span>課程
                        </a>
                        <a href="recruit.html" class="videos link">
                            <span class="icon-th-list" aria-hidden="true"></span>招生訊息
                        </a>
                        <a href="activities.html" class="demos link">
                            <span class="icon-camera" aria-hidden="true"></span>活動照片
                        </a>
                        <a href="masterpiece/masterpiece.html" class="lodge link">
                            <span class="icon-picture" aria-hidden="true"></span>學生作品
                        </a>
                        <a href="faq_apply.html" class="lodge link">
                            <span class="icon-question-sign" aria-hidden="true"></span>常見問題
                        </a>
                    </nav>
                </div>
            </div>

            <div id="content">
                <div class="grid_12">
                    <h3>上傳作品</h3>
                    <table id="upload">
                        <tr><th>作品名稱</th><th>課程名稱</th><th>作品作者</th><th>作者系別</th><th>作品連結</th></tr>
                        <tr>
                            <td><input type="text" id="name" name="name" placeholder="請輸入作品名稱"/></td>
                            <td><input type="text" id="course" name="course" placeholder="請輸入是在哪一堂課程完成的"/></td>
                            <td><input type="text" id="author" name="author" placeholder="請輸入作者姓名"/></td>
                            <td><input type="text" id="department" name="department" placeholder="請輸入作者系別"/></td>
                            <td><input type="text" id="link" name="link" placeholder="請輸入作品連結 ex: youtube"/></td>
                        </tr>
                    </table>
                    <button id="add" onclick="upload(0)">上傳作品後回到首頁</button>
                    <button id="add" onclick="upload(1)">再上傳一個作品</button>
                    <br/>
                    <br/>
                    <h3>查看已上傳作品</h3>
                    <table id="query">
                        <tr><th>作品名稱</th><th>課程名稱</th><th>作品作者</th><th>作者系別</th><th>刪除作品</th></tr>
                    </table>
                </div>
            </div>
        </div>
        <div id="footer">
            <div class="container_12">
                <div class="grid_4" style="margin: 10px 0px 10px 0px">
                    聯絡我們<br/>聯絡人：熊韻茹<br/>電話：(02)29393091 轉 62274<br/>信箱：dct_ta@cs.nccu.edu.tw<br/>地址：11605 台北市文山區指南路二段六十四號
                </div> 
                <div class="grid_12 copyright" style="text-align: center"> 
                    COPYRIGHT@2013
                </div>
            </div>
        </div>
        <script src="https://www.parse.com/downloads/javascript/parse/latest/min.js"></script>
        <script>
                        Parse.initialize("LO28TRXHBIC7zQTwO3OYhHcf66g8j46ux7XXc2Aq", "x8MYJCuOQsYFDRZK4wwbbkv5CRjbwkG8VrIkQfsx");

                        var Works = Parse.Object.extend("Works");

                        var upload = function(x) {
                            var x = x;

                            var works = new Works();

                            var name = $("#name").val();
                            var course = $("#course").val();
                            var author = $("#author").val();
                            var department = $("#department").val();
                            var link = $("#link").val();



                            works.set("name", name);
                            works.set("class", course);
                            works.set("author", author);
                            works.set("department", department);
                            works.set("youtube", link);
                            
                            works.save(null, {
                                success: function(object) {
                                    alert("object saved!");
                                    if (x == 0) {
                                        window.location.assign("index.html");
                                    }
                                    else {
                                        window.location.assign("manageWorks.html");
                                    }
                                },
                                error: function(error) {
                                    alert("Uh oh :( ");
                                }
                            });
                        };
        </script>
        <script>
            $(function() {
                var user = "test";

                Parse.initialize("LO28TRXHBIC7zQTwO3OYhHcf66g8j46ux7XXc2Aq", "x8MYJCuOQsYFDRZK4wwbbkv5CRjbwkG8VrIkQfsx");

                var Works = Parse.Object.extend("Works");

                var works = new Parse.Query(Works);

                works.equalTo("author", user);

                var collection = works.collection();

                collection.fetch({
                    success: function(collection) {
                        collection.each(function(object) {

                            $("#query").append("<tr name=\"" + object.id + "\">\n\
                        <td><a href=\"" + object.get("youtube") + "\">" + object.get("name") + "</td>\n\
                        <td>" + object.get("class") + "</td>\n\
                        <td>" + object.get("author") + "</td>\n\
                        <td>" + object.get("department") + "</td>\n\
                        <td>" + "<button id=\"" + object.id + "\" onclick=\"removeWorks()\">刪除本作品</button>\n\
                        </tr>");

                        });
                    },
                    error: function(collection, error) {
                        // The collection could not be retrieved.
                    }
                });
            });
        </script>
        <script>
            var removeWorks = function() {
                var oid = this.id;
                document.getElementsByName("oid").remove;
//                this.remove();
                var Works = Parse.Object.extend("Works");
                
                var del = new Parse.Query(Works);
                del.get(oid, {
                    success: function(delObj) {
                        delObj.destroy();
                        alert("object destory!");
                        window.location.assign("manageWorks.html");
                    },
                    error: function(object, error) {
                        alert("error");
                    }

                });

            };
        </script>
    </body>
</html>
